import{f as S,e as R,r as l,v as D,j as e}from"./index-wp0-z5g-.js";import{a as h}from"./DefaultLayout-DdBmS0sh.js";import{C as A,a as L,b as U}from"./CForm-DR_g0405.js";import{e as t,a as N}from"./index.esm-DPbDpRkl.js";import{C as p}from"./CFormTextarea-CxUoDJVg.js";import"./CAlert-D1Sj_uBa.js";import"./cil-user-Ddrdy7PS.js";const O=()=>{const b=S(),{slug:c}=R(),o=!!c,C=l.useRef(null),[s,u]=l.useState({name:"",name_ar:"",bio:"",bio_ar:"",description:"",description_ar:"",facebook:"",instagram:"",linkedin:""}),[x,k]=l.useState(null),[j,f]=l.useState(""),[g,d]=l.useState(""),[m,y]=l.useState(1);l.useEffect(()=>{o&&_()},[o,c]);const _=async()=>{var r;try{const n=(await h.get(`/instructors/admin/${c}`)).data;u({name:n.name||"",name_ar:n.name_ar||"",bio:n.bio||"",bio_ar:n.bio_ar||"",description:n.description||"",description_ar:n.description_ar||"",facebook:n.facebook||"",instagram:n.instagram||"",linkedin:n.linkedin||""}),(r=n.profileImage)!=null&&r.data&&f(`${D}/${n.profileImage.data}`)}catch(a){console.error("Failed to fetch instructor data:",a),d("Failed to load instructor data")}},i=r=>{const{name:a,value:n}=r.target;d(""),u(E=>({...E,[a]:n}))},w=r=>{const a=r.target.files[0];a&&(k(a),f(URL.createObjectURL(a)))},F=async r=>{r.preventDefault(),d("");const a=new FormData;a.append("name",s.name),a.append("name_ar",s.name_ar),a.append("bio",s.bio),a.append("bio_ar",s.bio_ar),a.append("description",s.description),a.append("description_ar",s.description_ar),a.append("facebook",s.facebook),a.append("instagram",s.instagram),a.append("linkedin",s.linkedin),x&&a.append("profileImage",x);try{o?await h.putWithFile(`/instructors/${c}`,a):await h.postWithFile("/instructors",a),b("/instructors")}catch(n){console.error("Error submitting form:",n),d(n.message||"An error occurred")}},I=()=>{b("/instructors")},v=(r,a)=>{a&&a.preventDefault(),y(r)};return e.jsx(A,{children:e.jsxs(L,{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4",children:e.jsx("h4",{children:o?"Edit Instructor":"Add New Instructor"})}),g&&e.jsx("div",{className:"alert alert-danger mb-3",children:g}),e.jsxs(U,{onSubmit:F,children:[e.jsx("div",{className:"mb-3",children:e.jsxs("ul",{className:"nav nav-tabs",children:[e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${m===1?"active":""}`,onClick:r=>v(1,r),type:"button",children:"English"})}),e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${m===2?"active":""}`,onClick:r=>v(2,r),type:"button",children:"Arabic"})})]})}),e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Profile Image"}),e.jsx(t,{type:"file",name:"profileImage",onChange:w,accept:"image/*",ref:C}),j&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:j,alt:"Preview",style:{maxWidth:"150px",borderRadius:"50%"},className:"img-thumbnail"})})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Facebook URL"}),e.jsx(t,{type:"url",name:"facebook",value:s.facebook,onChange:i,placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Instagram URL"}),e.jsx(t,{type:"url",name:"instagram",value:s.instagram,onChange:i,placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"LinkedIn URL"}),e.jsx(t,{type:"url",name:"linkedin",value:s.linkedin,onChange:i,placeholder:"https://linkedin.com/in/..."})]})]}),e.jsx("div",{style:{display:m===1?"block":"none"},children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Name (English) *"}),e.jsx(t,{type:"text",name:"name",value:s.name,onChange:i,required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Bio (English)"}),e.jsx(p,{name:"bio",value:s.bio,onChange:i,rows:3,placeholder:"Short bio..."})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Description (English)"}),e.jsx(p,{name:"description",value:s.description,onChange:i,rows:5,placeholder:"Full description..."})]})]})}),e.jsx("div",{style:{display:m===2?"block":"none"},children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Name (Arabic) *"}),e.jsx(t,{type:"text",name:"name_ar",value:s.name_ar,onChange:i,dir:"rtl"})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Bio (Arabic)"}),e.jsx(p,{name:"bio_ar",value:s.bio_ar,onChange:i,rows:3,placeholder:"نبذة مختصرة...",dir:"rtl"})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Description (Arabic)"}),e.jsx(p,{name:"description_ar",value:s.description_ar,onChange:i,rows:5,placeholder:"الوصف الكامل...",dir:"rtl"})]})]})}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[e.jsx(N,{color:"secondary",onClick:I,children:"Cancel"}),e.jsx(N,{color:"primary",type:"submit",children:o?"Update":"Save"})]})]})]})})};export{O as default};
