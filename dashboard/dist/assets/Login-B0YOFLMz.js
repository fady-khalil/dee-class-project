import{e as P,u as F,r as p,j as s,C as E}from"./index-CUZ3IgtU.js";import{h as j,c,d as n,i as L,f as g,e as f,a as D}from"./index.esm-B2Pq-DPn.js";import{C as w,a as b,b as I}from"./CForm-mBsUD2F9.js";import{b as k}from"./CAlert-CT9IIZhY.js";var q=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"];const Y=()=>{const t=P(),{login:C,isAuthenticated:d}=F();p.useEffect(()=>{d&&t("/dashboard",{replace:!0})},[d,t]);const[m,l]=p.useState({email:"",password:"",showPassword:!1,loading:!1,error:null,success:!1}),h=a=>{const{name:e,value:r}=a.target;l(o=>({...o,[e]:r}))},N=()=>{l(a=>({...a,showPassword:!a.showPassword}))},y=async a=>{a.preventDefault(),l(e=>({...e,loading:!0,error:null}));try{const{email:e,password:r}=m;if(!e||!r)throw new Error("Please enter both email and password");await C({email:e,password:r}),l(o=>({...o,loading:!1,success:!0,password:""})),setTimeout(()=>{t("/dashboard",{replace:!0})},900)}catch(e){console.error("Login error:",e),l(r=>({...r,loading:!1,error:e.message||"Authentication failed",password:""}))}},{email:v,password:S,showPassword:u,loading:i,error:x,success:A}=m;return A?s.jsx("div",{className:"admin-bg d-flex flex-column align-items-center justify-content-center",children:s.jsx(j,{children:s.jsx(c,{className:"justify-content-center",children:s.jsx(n,{md:6,lg:5,xl:4,children:s.jsx(w,{className:"professional-card success-card",children:s.jsxs(b,{children:[s.jsx("div",{className:"success-icon",children:s.jsx(L,{icon:q,size:"xl"})}),s.jsx("h3",{children:"Authentication Successful"}),s.jsx("p",{className:"text-medium-emphasis",children:"You will be redirected to the dashboard momentarily."})]})})})})})}):s.jsx("div",{className:"admin-bg d-flex align-items-center",children:s.jsx(j,{children:s.jsx(c,{className:"justify-content-center",children:s.jsxs(n,{lg:10,xl:8,children:[s.jsx(w,{className:"professional-card overflow-hidden",children:s.jsxs(c,{className:"g-0",children:[s.jsx(n,{lg:5,className:"d-none d-lg-block",children:s.jsxs("div",{className:"side-image h-100",children:[s.jsx("h2",{children:"Admin Portal"}),s.jsx("p",{className:"mb-0",children:"Secure access to D Class's administrative dashboard."})]})}),s.jsx(n,{xs:12,lg:7,children:s.jsxs(b,{className:"p-4 p-lg-5",children:[s.jsx("div",{className:"text-center d-lg-none mb-4",children:s.jsx("h2",{children:"Admin Portal"})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h1",{className:"login-title",children:"Sign in to your account"}),s.jsx("p",{className:"login-subtitle",children:"Enter your credentials to access the dashboard"})]}),x&&s.jsx(k,{className:"error-alert mb-4",role:"alert",children:x}),s.jsxs(I,{onSubmit:y,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(g,{htmlFor:"email",children:"Email Address"}),s.jsx(f,{id:"email",placeholder:"name@company.com",autoComplete:"email",name:"email",value:v,onChange:h,disabled:i,required:!0,"aria-label":"Email",type:"email",className:"professional-input"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx(g,{htmlFor:"password",children:"Password"}),s.jsx("span",{className:"form-text cursor-pointer",onClick:N,style:{cursor:"pointer"},children:u?"Hide":"Show"})]}),s.jsx(f,{id:"password",type:u?"text":"password",placeholder:"••••••••",autoComplete:"current-password",name:"password",value:S,onChange:h,disabled:i,required:!0,"aria-label":"Password",className:"professional-input"})]}),s.jsx(D,{type:"submit",color:"primary",className:"login-btn w-100",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(E,{size:"sm",className:"me-2"}),"Authenticating..."]}):"Sign In"})]})]})})]})}),s.jsxs("div",{className:"copyright-text",children:["© ",new Date().getFullYear()," D Class Administration System. All rights reserved."]})]})})})})};export{Y as default};
