import{r as l,j as e,C}from"./index-wp0-z5g-.js";import{a as p,f as T,c,d as r,g as i,e as y}from"./index.esm-DPbDpRkl.js";import{a as N,C as S}from"./DefaultLayout-DdBmS0sh.js";import{R as h}from"./RichTextEditor-bInbv-XF.js";import{C as A,a as w,b as U}from"./CForm-DR_g0405.js";import{c as D}from"./cil-pencil-m516yCOw.js";import{b as x}from"./CAlert-D1Sj_uBa.js";import{C as M}from"./CFormSwitch-DgNDXHRd.js";import"./cil-user-Ddrdy7PS.js";const Q=()=>{const[H,_]=l.useState(!0),[u,b]=l.useState(!1),[d,o]=l.useState(null),[m,j]=l.useState(null),[E,g]=l.useState(!1),[t,f]=l.useState({isActive:!1,registered_content:"",registered_content_ar:"",guest_content:"",guest_content_ar:"",app_store_url:"",play_store_url:""});l.useEffect(()=>{v()},[]);const v=async()=>{_(!0),o(null);try{const n=await N.get("/admin/content/bottom-banner");if(n!=null&&n.data){const s=n.data;f({isActive:s.isActive||!1,registered_content:s.registered_content||"",registered_content_ar:s.registered_content_ar||"",guest_content:s.guest_content||"",guest_content_ar:s.guest_content_ar||"",app_store_url:s.app_store_url||"",play_store_url:s.play_store_url||""})}}catch(n){o("Failed to load data"),console.error(n)}finally{_(!1)}},a=n=>{const{name:s,value:R,type:I,checked:F}=n.target;f(k=>({...k,[s]:I==="checkbox"?F:R}))},L=async n=>{n.preventDefault(),b(!0),o(null),j(null);try{const s=await N.put("/admin/content/bottom-banner",t);s!=null&&s.success?(j("Bottom banner saved successfully!"),g(!1),setTimeout(()=>j(null),3e3)):o((s==null?void 0:s.message)||"Failed to save bottom banner")}catch(s){o("Failed to save bottom banner"),console.error(s)}finally{b(!1)}},B=()=>{g(!1),v()};return H?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(C,{color:"primary"})}):E?e.jsxs(A,{children:[e.jsx(S,{children:e.jsx("strong",{children:"Edit Bottom Banner"})}),e.jsxs(w,{children:[d&&e.jsx(x,{color:"danger",children:d}),m&&e.jsx(x,{color:"success",children:m}),e.jsxs(U,{onSubmit:L,children:[e.jsx("div",{className:"mb-4",children:e.jsx(M,{id:"isActive",name:"isActive",label:"Banner Active",checked:t.isActive,onChange:a})}),e.jsx("h6",{className:"mb-3 text-muted",children:"Registered User Content"}),e.jsxs(c,{className:"mb-4",children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"English"})}),e.jsx(h,{name:"registered_content",value:t.registered_content,onChange:a})]})}),e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"Arabic"})}),e.jsx("div",{dir:"rtl",children:e.jsx(h,{name:"registered_content_ar",value:t.registered_content_ar,onChange:a})})]})})]}),e.jsx("h6",{className:"mb-3 text-muted",children:"App Store Links (for registered users)"}),e.jsxs(c,{className:"mb-4",children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"App Store URL"})}),e.jsx(y,{name:"app_store_url",value:t.app_store_url,onChange:a,placeholder:"https://apps.apple.com/..."})]})}),e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"Play Store URL"})}),e.jsx(y,{name:"play_store_url",value:t.play_store_url,onChange:a,placeholder:"https://play.google.com/..."})]})})]}),e.jsx("h6",{className:"mb-3 text-muted",children:"Guest Content"}),e.jsxs(c,{className:"mb-4",children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"English"})}),e.jsx(h,{name:"guest_content",value:t.guest_content,onChange:a})]})}),e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:e.jsx("strong",{children:"Arabic"})}),e.jsx("div",{dir:"rtl",children:e.jsx(h,{name:"guest_content_ar",value:t.guest_content_ar,onChange:a})})]})})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(p,{type:"submit",color:"primary",disabled:u,children:[u?e.jsx(C,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(p,{type:"button",color:"secondary",onClick:B,disabled:u,children:"Cancel"})]})]})]})]}):e.jsxs(A,{children:[e.jsxs(S,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bottom Banner"}),e.jsx("span",{className:`ms-3 badge bg-${t.isActive?"success":"secondary"}`,children:t.isActive?"Active":"Inactive"})]}),e.jsxs(p,{color:"primary",size:"sm",onClick:()=>g(!0),children:[e.jsx(T,{icon:D,className:"me-1"}),"Edit"]})]}),e.jsxs(w,{children:[d&&e.jsx(x,{color:"danger",children:d}),m&&e.jsx(x,{color:"success",children:m}),e.jsx("h6",{className:"mb-3 text-muted",children:"Registered User Content"}),e.jsxs(c,{className:"mb-4",children:[e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"English"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"100px",maxHeight:"300px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:t.registered_content||'<p class="text-muted">-</p>'}})]}),e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"Arabic"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"100px",maxHeight:"300px",overflowY:"auto"},dir:"rtl",dangerouslySetInnerHTML:{__html:t.registered_content_ar||'<p class="text-muted">-</p>'}})]})]}),e.jsx("h6",{className:"mb-3 text-muted",children:"App Store Links (for registered users)"}),e.jsxs(c,{className:"mb-4",children:[e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"App Store URL"}),e.jsx("p",{className:"text-muted",children:t.app_store_url||"-"})]}),e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"Play Store URL"}),e.jsx("p",{className:"text-muted",children:t.play_store_url||"-"})]})]}),e.jsx("h6",{className:"mb-3 text-muted",children:"Guest Content"}),e.jsxs(c,{children:[e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"English"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"100px",maxHeight:"300px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:t.guest_content||'<p class="text-muted">-</p>'}})]}),e.jsxs(r,{md:6,children:[e.jsx("p",{className:"fw-semibold mb-1",children:"Arabic"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"100px",maxHeight:"300px",overflowY:"auto"},dir:"rtl",dangerouslySetInnerHTML:{__html:t.guest_content_ar||'<p class="text-muted">-</p>'}})]})]})]})]})};export{Q as default};
