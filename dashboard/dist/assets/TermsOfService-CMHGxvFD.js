import{r,j as e,C as b}from"./index-DwGczr7l.js";import{a as o,f as v,c as N,d as f,g as T}from"./index.esm-B4C_3RAI.js";import{a as p,C as _}from"./DefaultLayout-Bhot9-ca.js";import{R as E}from"./RichTextEditor-DJhUbBKI.js";import{C as w,a as H,b as R}from"./CForm-Du01ZZzy.js";import{c as B}from"./cil-pencil-m516yCOw.js";import{c as M}from"./cil-trash-CBbKHhHb.js";import{c as P}from"./cil-plus-D8mtC-W5.js";import{b as l}from"./CAlert-CC772sW4.js";import"./cil-user-Ddrdy7PS.js";const X=()=>{const[D,C]=r.useState(!0),[i,d]=r.useState(!1),[m,n]=r.useState(null),[u,c]=r.useState(null),[A,h]=r.useState(!1),[x,j]=r.useState(!1),[a,g]=r.useState({content:"",content_ar:""});r.useEffect(()=>{y()},[]);const y=async()=>{C(!0),n(null);try{const s=await p.get("/admin/content/terms-of-service");if(s!=null&&s.data){const t=s.data;g({content:t.content||"",content_ar:t.content_ar||""}),j(t.content||t.content_ar)}}catch(s){n("Failed to load data"),console.error(s)}finally{C(!1)}},S=s=>{const{name:t,value:z}=s.target;g(L=>({...L,[t]:z}))},F=async s=>{s.preventDefault(),d(!0),n(null),c(null);try{const t=await p.put("/admin/content/terms-of-service",a);t!=null&&t.success?(c("Terms of service saved successfully!"),j(!0),h(!1),setTimeout(()=>c(null),3e3)):n((t==null?void 0:t.message)||"Failed to save terms of service")}catch(t){n("Failed to save terms of service"),console.error(t)}finally{d(!1)}},k=async()=>{if(window.confirm("Are you sure you want to delete the terms of service?")){d(!0),n(null);try{const s=await p.put("/admin/content/terms-of-service",{content:"",content_ar:""});s!=null&&s.success&&(g({content:"",content_ar:""}),j(!1),c("Terms of service deleted successfully!"),setTimeout(()=>c(null),3e3))}catch(s){n("Failed to delete terms of service"),console.error(s)}finally{d(!1)}}},I=()=>{h(!1),y()};return D?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(b,{color:"primary"})}):A?e.jsxs(w,{children:[e.jsx(_,{children:e.jsx("strong",{children:x?"Edit Terms of Service":"Add Terms of Service"})}),e.jsxs(H,{children:[m&&e.jsx(l,{color:"danger",children:m}),u&&e.jsx(l,{color:"success",children:u}),e.jsxs(R,{onSubmit:F,children:[e.jsxs(N,{className:"mb-4",children:[e.jsx(f,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(T,{children:e.jsx("strong",{children:"English Content"})}),e.jsx(E,{name:"content",value:a.content,onChange:S})]})}),e.jsx(f,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(T,{children:e.jsx("strong",{children:"Arabic Content"})}),e.jsx("div",{dir:"rtl",children:e.jsx(E,{name:"content_ar",value:a.content_ar,onChange:S})})]})})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(o,{type:"submit",color:"primary",disabled:i,children:[i?e.jsx(b,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(o,{type:"button",color:"secondary",onClick:I,disabled:i,children:"Cancel"})]})]})]})]}):e.jsxs(w,{children:[e.jsxs(_,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Terms of Service"}),x?e.jsxs("div",{children:[e.jsxs(o,{color:"primary",size:"sm",className:"me-2",onClick:()=>h(!0),children:[e.jsx(v,{icon:B,className:"me-1"}),"Edit"]}),e.jsxs(o,{color:"danger",size:"sm",onClick:k,disabled:i,children:[e.jsx(v,{icon:M,className:"me-1"}),"Delete"]})]}):e.jsxs(o,{color:"primary",size:"sm",onClick:()=>h(!0),children:[e.jsx(v,{icon:P,className:"me-1"}),"Add Terms of Service"]})]}),e.jsxs(H,{children:[m&&e.jsx(l,{color:"danger",children:m}),u&&e.jsx(l,{color:"success",children:u}),x?e.jsxs(N,{children:[e.jsxs(f,{md:6,children:[e.jsx("h6",{children:"English Content"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"200px",maxHeight:"400px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:a.content||"<p>-</p>"}})]}),e.jsxs(f,{md:6,children:[e.jsx("h6",{children:"Arabic Content"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"200px",maxHeight:"400px",overflowY:"auto"},dir:"rtl",dangerouslySetInnerHTML:{__html:a.content_ar||"<p>-</p>"}})]})]}):e.jsx(l,{color:"info",children:'No terms of service configured yet. Click "Add Terms of Service" to create one.'})]})]})};export{X as default};
