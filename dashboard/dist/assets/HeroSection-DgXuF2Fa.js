import{r as l,j as e,C as H}from"./index-DwGczr7l.js";import{a as d,f as E,c as J,d as A,g as b,e as F}from"./index.esm-B4C_3RAI.js";import{a as y,C as D,b as K,c as M,d as u,e as x,f as h}from"./DefaultLayout-Bhot9-ca.js";import{C as k,a as R,b as O}from"./CForm-Du01ZZzy.js";import{c as Q}from"./cil-pencil-m516yCOw.js";import{c as U}from"./cil-trash-CBbKHhHb.js";import{c as V}from"./cil-plus-D8mtC-W5.js";import{b as c}from"./CAlert-CC772sW4.js";import{C as $}from"./CFormTextarea-BGakudCY.js";import{C as W}from"./CFormCheck-ceQ9ERlU.js";import"./cil-user-Ddrdy7PS.js";const oe=()=>{const[z,T]=l.useState(!0),[m,j]=l.useState(!1),[f,n]=l.useState(null),[C,o]=l.useState(null),[B,g]=l.useState(!1),[N,S]=l.useState(!1),[r,_]=l.useState({title:"",title_ar:"",text:"",text_ar:"",featured_courses:[]}),[v,P]=l.useState([]);l.useEffect(()=>{w()},[]);const w=async()=>{var s;T(!0),n(null);try{const[t,i]=await Promise.all([y.get("/admin/content/hero"),y.get("/admin/content/courses-list")]);if(t!=null&&t.data){const a=t.data;_({title:a.title||"",title_ar:a.title_ar||"",text:a.text||"",text_ar:a.text_ar||"",featured_courses:a.featured_courses||[]}),S(a.title||a.title_ar||a.text||a.text_ar||((s=a.featured_courses)==null?void 0:s.length)>0)}i!=null&&i.data&&P(i.data)}catch(t){n("Failed to load data"),console.error(t)}finally{T(!1)}},p=s=>{const{name:t,value:i}=s.target;_(a=>({...a,[t]:i}))},I=s=>{_(t=>{const i=t.featured_courses.includes(s);return{...t,featured_courses:i?t.featured_courses.filter(a=>a!==s):[...t.featured_courses,s]}})},L=async s=>{s.preventDefault(),j(!0),n(null),o(null);try{const t=await y.put("/admin/content/hero",r);t!=null&&t.success?(o("Hero section saved successfully!"),S(!0),g(!1),setTimeout(()=>o(null),3e3)):n((t==null?void 0:t.message)||"Failed to save hero section")}catch(t){n("Failed to save hero section"),console.error(t)}finally{j(!1)}},Y=async()=>{if(window.confirm("Are you sure you want to delete the hero section content?")){j(!0),n(null);try{const s=await y.put("/admin/content/hero",{title:"",title_ar:"",text:"",text_ar:"",featured_courses:[]});s!=null&&s.success&&(_({title:"",title_ar:"",text:"",text_ar:"",featured_courses:[]}),S(!1),o("Hero section deleted successfully!"),setTimeout(()=>o(null),3e3))}catch(s){n("Failed to delete hero section"),console.error(s)}finally{j(!1)}}},q=()=>{g(!1),w()},G=()=>v.filter(s=>r.featured_courses.includes(s._id)).map(s=>s.name).join(", ");return z?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(H,{color:"primary"})}):B?e.jsxs(k,{children:[e.jsx(D,{children:e.jsx("strong",{children:N?"Edit Hero Section":"Add Hero Section"})}),e.jsxs(R,{children:[f&&e.jsx(c,{color:"danger",children:f}),C&&e.jsx(c,{color:"success",children:C}),e.jsxs(O,{onSubmit:L,children:[e.jsxs(J,{className:"mb-4",children:[e.jsxs(A,{md:6,children:[e.jsx("h5",{children:"English Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{children:"Title (EN)"}),e.jsx(F,{name:"title",value:r.title,onChange:p,placeholder:"Enter English title"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{children:"Text (EN)"}),e.jsx($,{name:"text",value:r.text,onChange:p,placeholder:"Enter English text",rows:4})]})]}),e.jsxs(A,{md:6,children:[e.jsx("h5",{children:"Arabic Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{children:"Title (AR)"}),e.jsx(F,{name:"title_ar",value:r.title_ar,onChange:p,placeholder:"Enter Arabic title",dir:"rtl"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{children:"Text (AR)"}),e.jsx($,{name:"text_ar",value:r.text_ar,onChange:p,placeholder:"Enter Arabic text",rows:4,dir:"rtl"})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:"Featured Courses"}),e.jsx("p",{className:"text-muted",children:"Select courses to display in the hero section slider"}),v.length===0?e.jsx(c,{color:"info",children:"No courses available. Create some courses first."}):e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #dee2e6",borderRadius:"4px",padding:"10px"},children:v.map(s=>e.jsx(W,{id:`course-${s._id}`,label:`${s.name} ${s.name_ar?`(${s.name_ar})`:""}`,checked:r.featured_courses.includes(s._id),onChange:()=>I(s._id),className:"mb-2"},s._id))}),e.jsxs("p",{className:"mt-2 text-muted",children:["Selected: ",r.featured_courses.length," course(s)"]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(d,{type:"submit",color:"primary",disabled:m,children:[m?e.jsx(H,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(d,{type:"button",color:"secondary",onClick:q,disabled:m,children:"Cancel"})]})]})]})]}):e.jsxs(k,{children:[e.jsxs(D,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Hero Section"}),N?e.jsxs("div",{children:[e.jsxs(d,{color:"primary",size:"sm",className:"me-2",onClick:()=>g(!0),children:[e.jsx(E,{icon:Q,className:"me-1"}),"Edit"]}),e.jsxs(d,{color:"danger",size:"sm",onClick:Y,disabled:m,children:[e.jsx(E,{icon:U,className:"me-1"}),"Delete"]})]}):e.jsxs(d,{color:"primary",size:"sm",onClick:()=>g(!0),children:[e.jsx(E,{icon:V,className:"me-1"}),"Add Hero Section"]})]}),e.jsxs(R,{children:[f&&e.jsx(c,{color:"danger",children:f}),C&&e.jsx(c,{color:"success",children:C}),N?e.jsx(K,{bordered:!0,children:e.jsxs(M,{children:[e.jsxs(u,{children:[e.jsx(x,{style:{width:"200px"},children:"Title (EN)"}),e.jsx(h,{children:r.title||"-"})]}),e.jsxs(u,{children:[e.jsx(x,{children:"Title (AR)"}),e.jsx(h,{dir:"rtl",children:r.title_ar||"-"})]}),e.jsxs(u,{children:[e.jsx(x,{children:"Text (EN)"}),e.jsx(h,{children:r.text||"-"})]}),e.jsxs(u,{children:[e.jsx(x,{children:"Text (AR)"}),e.jsx(h,{dir:"rtl",children:r.text_ar||"-"})]}),e.jsxs(u,{children:[e.jsx(x,{children:"Featured Courses"}),e.jsx(h,{children:r.featured_courses.length>0?`${r.featured_courses.length} course(s) selected: ${G()}`:"No courses selected"})]})]})}):e.jsx(c,{color:"info",children:'No hero section content configured yet. Click "Add Hero Section" to create one.'})]})]})};export{oe as default};
