import{r as t,j as e,C as D,v as y}from"./index-wp0-z5g-.js";import{a as x,f as c}from"./index.esm-DPbDpRkl.js";import{a as H,C as P,b as w,r as E,d as v,e as o,c as $,f as n,s as T,t as j,m as R,n as V,o as B,p as F,q as _}from"./DefaultLayout-DdBmS0sh.js";import{C as z,a as I}from"./CForm-DR_g0405.js";import{b as A}from"./CAlert-D1Sj_uBa.js";import"./cil-user-Ddrdy7PS.js";var M=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='272 434.744 272 209.176 240 209.176 240 434.744 188.118 382.862 165.49 405.489 256 496 346.51 405.489 323.882 382.862 272 434.744' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M400,161.176c0-79.4-64.6-144-144-144s-144,64.6-144,144a96,96,0,0,0,0,192h80v-32H112a64,64,0,0,1,0-128h32v-32a112,112,0,0,1,224,0v32h32a64,64,0,0,1,0,128H320v32h80a96,96,0,0,0,0-192Z' class='ci-primary'/>"],U=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M16,112V496H496V112ZM236.8,341.6a32.167,32.167,0,0,0,38.4,0L298.667,324,464,448v16H48V448L213.333,324ZM256,316,48,160V144H464v16ZM48,200,186.667,304,48,408ZM464,408,325.333,304,464,200Z' class='ci-primary'/>"],q=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M253.924,127.592a64,64,0,1,0,64,64A64.073,64.073,0,0,0,253.924,127.592Zm0,96a32,32,0,1,1,32-32A32.037,32.037,0,0,1,253.924,223.592Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M376.906,68.515A173.922,173.922,0,0,0,108.2,286.426L229.107,472.039a29.619,29.619,0,0,0,49.635,0L399.653,286.426A173.921,173.921,0,0,0,376.906,68.515Zm-4.065,200.444L253.925,451.509,135.008,268.959C98.608,213.08,106.415,138.3,153.571,91.142a141.92,141.92,0,0,1,200.708,0C401.435,138.3,409.241,213.08,372.841,268.959Z' class='ci-primary'/>"],G=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M449.366,89.648l-.685-.428L362.088,46.559,268.625,171.176l43,57.337a88.529,88.529,0,0,1-83.115,83.114l-57.336-43L46.558,362.088l42.306,85.869.356.725.429.684a25.085,25.085,0,0,0,21.393,11.857h22.344A327.836,327.836,0,0,0,461.222,133.386V111.041A25.084,25.084,0,0,0,449.366,89.648Zm-20.144,43.738c0,163.125-132.712,295.837-295.836,295.837h-18.08L87,371.76l84.18-63.135,46.867,35.149h5.333a120.535,120.535,0,0,0,120.4-120.4v-5.333l-35.149-46.866L371.759,87l57.463,28.311Z' class='ci-primary'/>"];const Y=()=>{var f;const[N,u]=t.useState(!0),[h,b]=t.useState([]),[C,m]=t.useState(null),[l,d]=t.useState({page:1,pages:1,total:0}),[r,L]=t.useState(null),[S,p]=t.useState(!1);t.useEffect(()=>{Z()},[l.page]);const Z=async()=>{u(!0),m(null);try{const a=`/admin/expert-applications?page=${l.page}&limit=20`,s=await H.get(a);s!=null&&s.success?(b(s.data||[]),d(s.pagination||{page:1,pages:1,total:0})):m("Failed to load applications")}catch(a){m("Failed to load applications"),console.error(a)}finally{u(!1)}},k=a=>{L(a),p(!0)},g=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return N&&h.length===0?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(D,{color:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(P,{children:e.jsx("strong",{children:"Expert Applications"})}),e.jsxs(I,{children:[C&&e.jsx(A,{color:"danger",children:C}),h.length===0?e.jsx(A,{color:"info",children:"No applications found."}):e.jsxs(e.Fragment,{children:[e.jsxs(w,{hover:!0,responsive:!0,children:[e.jsx(E,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Email"}),e.jsx(o,{children:"Phone"}),e.jsx(o,{children:"Location"}),e.jsx(o,{children:"Resume"}),e.jsx(o,{children:"Date"})]})}),e.jsx($,{children:h.map(a=>{var s;return e.jsxs(v,{onClick:()=>k(a),style:{cursor:"pointer"},children:[e.jsx(n,{children:a.name}),e.jsx(n,{children:e.jsx("a",{href:`mailto:${a.email}`,className:"text-decoration-none",onClick:i=>i.stopPropagation(),children:a.email})}),e.jsx(n,{children:e.jsx("a",{href:`tel:${a.phone}`,className:"text-decoration-none",onClick:i=>i.stopPropagation(),children:a.phone})}),e.jsx(n,{children:a.location}),e.jsx(n,{children:(s=a.resume)!=null&&s.path?e.jsx(x,{color:"success",size:"sm",variant:"ghost",href:`${y}/${a.resume.path}`,target:"_blank",title:"Download Resume",onClick:i=>i.stopPropagation(),children:e.jsx(c,{icon:M})}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx(n,{children:g(a.createdAt)})]},a._id)})})]}),l.pages>1&&e.jsxs(T,{className:"justify-content-center mt-3",children:[e.jsx(j,{disabled:l.page===1,onClick:()=>d(a=>({...a,page:a.page-1})),children:"Previous"}),[...Array(l.pages)].map((a,s)=>e.jsx(j,{active:l.page===s+1,onClick:()=>d(i=>({...i,page:s+1})),children:s+1},s+1)),e.jsx(j,{disabled:l.page===l.pages,onClick:()=>d(a=>({...a,page:a.page+1})),children:"Next"})]}),e.jsxs("div",{className:"text-muted text-center mt-2",children:["Total: ",l.total," applications"]})]})]})]}),e.jsxs(R,{visible:S,onClose:()=>p(!1),children:[e.jsx(V,{children:e.jsx(B,{children:"Application Details"})}),e.jsx(F,{children:r&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx(c,{icon:U,className:"me-2"}),e.jsx("a",{href:`mailto:${r.email}`,children:r.email})]}),e.jsxs("p",{children:[e.jsx(c,{icon:G,className:"me-2"}),e.jsx("a",{href:`tel:${r.phone}`,children:r.phone})]}),e.jsxs("p",{children:[e.jsx(c,{icon:q,className:"me-2"}),r.location]}),((f=r.resume)==null?void 0:f.path)&&e.jsx("p",{children:e.jsxs(x,{color:"primary",size:"sm",href:`${y}/${r.resume.path}`,target:"_blank",children:[e.jsx(c,{icon:M,className:"me-1"}),"Download Resume (",r.resume.originalName,")"]})}),e.jsx("p",{className:"text-muted mt-3",children:e.jsxs("small",{children:["Submitted: ",g(r.createdAt)]})})]})}),e.jsx(_,{children:e.jsx(x,{color:"secondary",onClick:()=>p(!1),children:"Close"})})]})]})};export{Y as default};
