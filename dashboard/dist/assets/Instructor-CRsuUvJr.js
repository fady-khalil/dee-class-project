import{e as F,u as O,r,j as e,C as R,q as T}from"./index-CUZ3IgtU.js";import{a as p}from"./DefaultLayout-CkCiLseG.js";import{R as V,d as M,C as $,a as W,b as H,c as q,E as U}from"./ResourceTable-C74f08gv.js";import{C as z,a as G}from"./CForm-mBsUD2F9.js";import{a as g}from"./index.esm-B2Pq-DPn.js";import{C as J}from"./CAlert-CT9IIZhY.js";import"./cil-user-Ddrdy7PS.js";const se=()=>{const d=F(),{canWrite:C}=O(),n=C("courses"),[c,b]=r.useState([]),[y,N]=r.useState(!0),[I,a]=r.useState(!1),[t,A]=r.useState(null),[v,o]=r.useState(!1),[i,h]=r.useState(null),[m,S]=r.useState(1),[l]=r.useState(10),k=[{header:"Name",accessor:"name"},{header:"Name (Arabic)",accessor:"name_ar"},{header:"Created At",accessor:s=>new Date(s.createdAt).toLocaleDateString()}];r.useEffect(()=>{u()},[]);const u=async()=>{try{const s=await p.get("/instructors");b((s==null?void 0:s.data)||[])}catch(s){console.error("Failed to fetch instructors:",s)}finally{N(!1)}},x=()=>{n&&d("/instructors/new")},f=s=>{d(`/instructors/${s.slug}/edit`)},E=s=>{h(s),o(!0)},D=async()=>{try{await p.delete(`/instructors/${i.slug}`),o(!1),h(null),u()}catch(s){console.error("Failed to delete instructor:",s)}},w=s=>{A(s),a(!0)},j=m*l,_=j-l;c.slice(_,j);const B=Math.ceil(c.length/l),L=s=>{S(s)},P=e.jsx(U,{title:"No Instructors Found",message:"There are no instructors in the database yet.",actionLabel:n?"Add Instructor":null,onAction:n?x:null});return y?e.jsx("div",{className:"d-flex justify-content-center my-5",children:e.jsx(R,{color:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mb-4",children:e.jsxs(G,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Instructors"}),n&&e.jsx(g,{color:"primary",onClick:x,children:"Add Instructor"})]}),e.jsx(V,{columns:k,data:c,resourceType:"courses",onView:w,onEdit:n?f:void 0,onDelete:n?E:void 0,pagination:{currentPage:m,totalPages:B,onPageChange:L},emptyState:P})]})}),e.jsx(M,{visible:v,onClose:()=>o(!1),onConfirm:D,itemName:(i==null?void 0:i.name)||"",itemType:"instructor"}),e.jsxs($,{placement:"end",visible:I,onHide:()=>a(!1),children:[e.jsxs(W,{children:[e.jsx(H,{children:"Instructor Details"}),e.jsx(J,{className:"text-reset",onClick:()=>a(!1)})]}),e.jsx(q,{children:t&&e.jsxs("div",{children:[t.profileImage&&e.jsx("div",{className:"mb-3 text-center",children:e.jsx("img",{src:`${T}/${t.profileImage}`,alt:t.name,style:{maxWidth:"150px",borderRadius:"50%"}})}),e.jsx("h5",{children:"Name (English)"}),e.jsx("p",{children:t.name||"N/A"}),e.jsx("h5",{children:"Name (Arabic)"}),e.jsx("p",{dir:"rtl",children:t.name_ar||"N/A"}),e.jsx("h5",{children:"Bio (English)"}),e.jsx("p",{children:t.bio||"N/A"}),e.jsx("h5",{children:"Bio (Arabic)"}),e.jsx("p",{dir:"rtl",children:t.bio_ar||"N/A"}),e.jsx("h5",{children:"Description (English)"}),e.jsx("p",{children:t.description||"N/A"}),e.jsx("h5",{children:"Description (Arabic)"}),e.jsx("p",{dir:"rtl",children:t.description_ar||"N/A"}),e.jsx("h5",{children:"Social Links"}),e.jsxs("ul",{children:[t.facebook&&e.jsx("li",{children:e.jsx("a",{href:t.facebook,target:"_blank",rel:"noreferrer",children:"Facebook"})}),t.instagram&&e.jsx("li",{children:e.jsx("a",{href:t.instagram,target:"_blank",rel:"noreferrer",children:"Instagram"})}),t.linkedin&&e.jsx("li",{children:e.jsx("a",{href:t.linkedin,target:"_blank",rel:"noreferrer",children:"LinkedIn"})})]}),n&&e.jsx(g,{color:"primary",className:"mt-3",onClick:()=>{a(!1),f(t)},children:"Edit Instructor"})]})})]})]})};export{se as default};
