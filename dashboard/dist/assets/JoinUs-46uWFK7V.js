import{r as a,j as e,C as _}from"./index-CUZ3IgtU.js";import{a as r,i as S,c as L,d as T,f as j,e as w}from"./index.esm-B2Pq-DPn.js";import{a as v,C as J,b as P,c as q,d as f,e as C,f as p}from"./DefaultLayout-CkCiLseG.js";import{C as U,a as A,b as G}from"./CForm-mBsUD2F9.js";import{c as K}from"./cil-pencil-m516yCOw.js";import{c as M}from"./cil-trash-CBbKHhHb.js";import{c as O}from"./cil-plus-D8mtC-W5.js";import{b as c}from"./CAlert-CT9IIZhY.js";import{C as D}from"./CFormTextarea-RMpZWAh2.js";import"./cil-user-Ddrdy7PS.js";const le=()=>{const[F,E]=a.useState(!0),[o,d]=a.useState(!1),[x,i]=a.useState(null),[h,n]=a.useState(null),[R,m]=a.useState(!1),[y,g]=a.useState(!1),[l,b]=a.useState({title:"",title_ar:"",text:"",text_ar:""});a.useEffect(()=>{N()},[]);const N=async()=>{E(!0),i(null);try{const s=await v.get("/admin/content/join-us");if(s!=null&&s.data){const t=s.data;b({title:t.title||"",title_ar:t.title_ar||"",text:t.text||"",text_ar:t.text_ar||""}),g(t.title||t.title_ar||t.text||t.text_ar)}}catch(s){i("Failed to load data"),console.error(s)}finally{E(!1)}},u=s=>{const{name:t,value:I}=s.target;b(B=>({...B,[t]:I}))},k=async s=>{s.preventDefault(),d(!0),i(null),n(null);try{const t=await v.put("/admin/content/join-us",l);t!=null&&t.success?(n("Join Us section saved successfully!"),g(!0),m(!1),setTimeout(()=>n(null),3e3)):i((t==null?void 0:t.message)||"Failed to save Join Us section")}catch(t){i("Failed to save Join Us section"),console.error(t)}finally{d(!1)}},z=async()=>{if(window.confirm("Are you sure you want to delete the Join Us section content?")){d(!0),i(null);try{const s=await v.put("/admin/content/join-us",{title:"",title_ar:"",text:"",text_ar:""});s!=null&&s.success&&(b({title:"",title_ar:"",text:"",text_ar:""}),g(!1),n("Join Us section deleted successfully!"),setTimeout(()=>n(null),3e3))}catch(s){i("Failed to delete Join Us section"),console.error(s)}finally{d(!1)}}},H=()=>{m(!1),N()};return F?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(_,{color:"primary"})}):R?e.jsxs(U,{children:[e.jsx(J,{children:e.jsx("strong",{children:y?"Edit Join Us Section":"Add Join Us Section"})}),e.jsxs(A,{children:[x&&e.jsx(c,{color:"danger",children:x}),h&&e.jsx(c,{color:"success",children:h}),e.jsxs(G,{onSubmit:k,children:[e.jsxs(L,{className:"mb-4",children:[e.jsxs(T,{md:6,children:[e.jsx("h5",{children:"English Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{children:"Title (EN)"}),e.jsx(w,{name:"title",value:l.title,onChange:u,placeholder:"Enter English title"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{children:"Text (EN)"}),e.jsx(D,{name:"text",value:l.text,onChange:u,placeholder:"Enter English text",rows:6})]})]}),e.jsxs(T,{md:6,children:[e.jsx("h5",{children:"Arabic Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{children:"Title (AR)"}),e.jsx(w,{name:"title_ar",value:l.title_ar,onChange:u,placeholder:"Enter Arabic title",dir:"rtl"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(j,{children:"Text (AR)"}),e.jsx(D,{name:"text_ar",value:l.text_ar,onChange:u,placeholder:"Enter Arabic text",rows:6,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(r,{type:"submit",color:"primary",disabled:o,children:[o?e.jsx(_,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(r,{type:"button",color:"secondary",onClick:H,disabled:o,children:"Cancel"})]})]})]})]}):e.jsxs(U,{children:[e.jsxs(J,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Join Us Section"}),y?e.jsxs("div",{children:[e.jsxs(r,{color:"primary",size:"sm",className:"me-2",onClick:()=>m(!0),children:[e.jsx(S,{icon:K,className:"me-1"}),"Edit"]}),e.jsxs(r,{color:"danger",size:"sm",onClick:z,disabled:o,children:[e.jsx(S,{icon:M,className:"me-1"}),"Delete"]})]}):e.jsxs(r,{color:"primary",size:"sm",onClick:()=>m(!0),children:[e.jsx(S,{icon:O,className:"me-1"}),"Add Join Us Section"]})]}),e.jsxs(A,{children:[x&&e.jsx(c,{color:"danger",children:x}),h&&e.jsx(c,{color:"success",children:h}),y?e.jsx(P,{bordered:!0,children:e.jsxs(q,{children:[e.jsxs(f,{children:[e.jsx(C,{style:{width:"200px"},children:"Title (EN)"}),e.jsx(p,{children:l.title||"-"})]}),e.jsxs(f,{children:[e.jsx(C,{children:"Title (AR)"}),e.jsx(p,{dir:"rtl",children:l.title_ar||"-"})]}),e.jsxs(f,{children:[e.jsx(C,{children:"Text (EN)"}),e.jsx(p,{style:{whiteSpace:"pre-wrap"},children:l.text||"-"})]}),e.jsxs(f,{children:[e.jsx(C,{children:"Text (AR)"}),e.jsx(p,{dir:"rtl",style:{whiteSpace:"pre-wrap"},children:l.text_ar||"-"})]})]})}):e.jsx(c,{color:"info",children:'No Join Us section content configured yet. Click "Add Join Us Section" to create one.'})]})]})};export{le as default};
