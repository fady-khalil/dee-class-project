import{r as t,j as e,C as T}from"./index-wp0-z5g-.js";import{a as i,f as p,c as F,d as m,g as h,e as y}from"./index.esm-DPbDpRkl.js";import{a as g,C as R,b as ee,c as se,d as M,e as k,f as z,h as ae,i as te,j as le,k as ne,l as re,m as ie,n as ce,o as de,p as oe,q as me}from"./DefaultLayout-DdBmS0sh.js";import{R as P}from"./RichTextEditor-bInbv-XF.js";import{C as B,a as L,b as O}from"./CForm-DR_g0405.js";import{c as $}from"./cil-pencil-m516yCOw.js";import{b as N}from"./CAlert-D1Sj_uBa.js";import{c as he}from"./cil-plus-D8mtC-W5.js";import{c as ue}from"./cil-trash-CBbKHhHb.js";import"./cil-user-Ddrdy7PS.js";const Te=()=>{const[K,_]=t.useState(!0),[c,d]=t.useState(!1),[E,l]=t.useState(null),[q,r]=t.useState(null),[S,A]=t.useState(!1),[xe,I]=t.useState(!1),[U,u]=t.useState(!1),[x,Q]=t.useState(null),[o,b]=t.useState({question:"",question_ar:"",answer:"",answer_ar:""}),[j,D]=t.useState({pageTitle:"",pageTitle_ar:""}),[w,G]=t.useState([]);t.useEffect(()=>{f()},[]);const f=async()=>{var a;_(!0),l(null);try{const s=await g.get("/admin/content/faq");if(s!=null&&s.data){const n=s.data;D({pageTitle:n.pageTitle||"",pageTitle_ar:n.pageTitle_ar||""}),G(n.items||[]),I(n.pageTitle||n.pageTitle_ar||((a=n.items)==null?void 0:a.length)>0)}}catch(s){l("Failed to load data"),console.error(s)}finally{_(!1)}},H=a=>{const{name:s,value:n}=a.target;D(v=>({...v,[s]:n}))},C=a=>{const{name:s,value:n}=a.target;b(v=>({...v,[s]:n}))},J=async a=>{a.preventDefault(),d(!0),l(null),r(null);try{const s=await g.put("/admin/content/faq",j);s!=null&&s.success?(r("FAQ header saved successfully!"),I(!0),A(!1),setTimeout(()=>r(null),3e3)):l((s==null?void 0:s.message)||"Failed to save FAQ header")}catch(s){l("Failed to save FAQ header"),console.error(s)}finally{d(!1)}},V=()=>{Q(null),b({question:"",question_ar:"",answer:"",answer_ar:""}),u(!0)},W=a=>{Q(a),b({question:a.question||"",question_ar:a.question_ar||"",answer:a.answer||"",answer_ar:a.answer_ar||""}),u(!0)},X=async a=>{a.preventDefault(),d(!0),l(null),r(null);try{let s;x?s=await g.put(`/admin/content/faq/items/${x._id}`,o):s=await g.post("/admin/content/faq/items",o),s!=null&&s.success?(r(x?"FAQ item updated successfully!":"FAQ item added successfully!"),u(!1),f(),setTimeout(()=>r(null),3e3)):l((s==null?void 0:s.message)||"Failed to save FAQ item")}catch(s){l("Failed to save FAQ item"),console.error(s)}finally{d(!1)}},Y=async a=>{if(window.confirm("Are you sure you want to delete this FAQ item?")){d(!0),l(null);try{const s=await g.delete(`/admin/content/faq/items/${a}`);s!=null&&s.success&&(r("FAQ item deleted successfully!"),f(),setTimeout(()=>r(null),3e3))}catch(s){l("Failed to delete FAQ item"),console.error(s)}finally{d(!1)}}},Z=()=>{A(!1),f()};return K?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(T,{color:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{className:"mb-4",children:[e.jsxs(R,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"FAQ Page Settings"}),!S&&e.jsxs(i,{color:"primary",size:"sm",onClick:()=>A(!0),children:[e.jsx(p,{icon:$,className:"me-1"}),"Edit"]})]}),e.jsxs(L,{children:[E&&e.jsx(N,{color:"danger",children:E}),q&&e.jsx(N,{color:"success",children:q}),S?e.jsxs(O,{onSubmit:J,children:[e.jsxs(F,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(h,{children:"Page Title (EN)"}),e.jsx(y,{name:"pageTitle",value:j.pageTitle,onChange:H,placeholder:"Enter English page title"})]}),e.jsxs(m,{md:6,children:[e.jsx(h,{children:"Page Title (AR)"}),e.jsx(y,{name:"pageTitle_ar",value:j.pageTitle_ar,onChange:H,placeholder:"Enter Arabic page title",dir:"rtl"})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(i,{type:"submit",color:"primary",disabled:c,children:[c?e.jsx(T,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(i,{type:"button",color:"secondary",onClick:Z,disabled:c,children:"Cancel"})]})]}):e.jsx(ee,{bordered:!0,children:e.jsxs(se,{children:[e.jsxs(M,{children:[e.jsx(k,{style:{width:"200px"},children:"Page Title (EN)"}),e.jsx(z,{children:j.pageTitle||"-"})]}),e.jsxs(M,{children:[e.jsx(k,{children:"Page Title (AR)"}),e.jsx(z,{dir:"rtl",children:j.pageTitle_ar||"-"})]})]})})]})]}),e.jsxs(B,{children:[e.jsxs(R,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("strong",{children:["FAQ Items (",w.length,")"]}),e.jsxs(i,{color:"primary",size:"sm",onClick:V,children:[e.jsx(p,{icon:he,className:"me-1"}),"Add Question"]})]}),e.jsx(L,{children:w.length===0?e.jsx(N,{color:"info",children:'No FAQ items yet. Click "Add Question" to create one.'}):e.jsx(ae,{children:w.map((a,s)=>e.jsxs(te,{itemKey:s,children:[e.jsx(le,{children:e.jsx("div",{className:"d-flex justify-content-between align-items-center w-100 me-3",children:e.jsxs("div",{children:[e.jsx(ne,{color:"secondary",className:"me-2",children:s+1}),a.question]})})}),e.jsxs(re,{children:[e.jsxs(F,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx("h6",{children:"Question (EN)"}),e.jsx("p",{children:a.question}),e.jsx("h6",{children:"Answer (EN)"}),e.jsx("div",{dangerouslySetInnerHTML:{__html:a.answer}})]}),e.jsxs(m,{md:6,children:[e.jsx("h6",{children:"Question (AR)"}),e.jsx("p",{dir:"rtl",children:a.question_ar||"-"}),e.jsx("h6",{children:"Answer (AR)"}),e.jsx("div",{dir:"rtl",dangerouslySetInnerHTML:{__html:a.answer_ar||"-"}})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(i,{color:"primary",size:"sm",onClick:()=>W(a),children:[e.jsx(p,{icon:$,className:"me-1"}),"Edit"]}),e.jsxs(i,{color:"danger",size:"sm",onClick:()=>Y(a._id),disabled:c,children:[e.jsx(p,{icon:ue,className:"me-1"}),"Delete"]})]})]})]},a._id))})})]}),e.jsxs(ie,{visible:U,onClose:()=>u(!1),size:"xl",children:[e.jsx(ce,{children:e.jsx(de,{children:x?"Edit FAQ Item":"Add FAQ Item"})}),e.jsxs(O,{onSubmit:X,children:[e.jsx(oe,{children:e.jsxs(F,{className:"mb-4",children:[e.jsxs(m,{md:6,children:[e.jsx("h5",{children:"English Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{children:"Question (EN) *"}),e.jsx(y,{name:"question",value:o.question,onChange:C,placeholder:"Enter question in English",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{children:"Answer (EN) *"}),e.jsx(P,{name:"answer",value:o.answer,onChange:C})]})]}),e.jsxs(m,{md:6,children:[e.jsx("h5",{children:"Arabic Content"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{children:"Question (AR)"}),e.jsx(y,{name:"question_ar",value:o.question_ar,onChange:C,placeholder:"Enter question in Arabic",dir:"rtl"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{children:"Answer (AR)"}),e.jsx("div",{dir:"rtl",children:e.jsx(P,{name:"answer_ar",value:o.answer_ar,onChange:C})})]})]})]})}),e.jsxs(me,{children:[e.jsx(i,{color:"secondary",onClick:()=>u(!1),disabled:c,children:"Cancel"}),e.jsxs(i,{type:"submit",color:"primary",disabled:c,children:[c?e.jsx(T,{size:"sm",className:"me-2"}):null,x?"Update":"Add"]})]})]})]})]})};export{Te as default};
