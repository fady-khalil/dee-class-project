import{r as n,j as e,C as P}from"./index-wp0-z5g-.js";import{a as l,f,c as S,d as x,g as N}from"./index.esm-DPbDpRkl.js";import{a as g,C as _}from"./DefaultLayout-DdBmS0sh.js";import{R as E}from"./RichTextEditor-bInbv-XF.js";import{C as w,a as H,b as L}from"./CForm-DR_g0405.js";import{c as R}from"./cil-pencil-m516yCOw.js";import{c as B}from"./cil-trash-CBbKHhHb.js";import{c as M}from"./cil-plus-D8mtC-W5.js";import{b as i}from"./CAlert-D1Sj_uBa.js";import"./cil-user-Ddrdy7PS.js";const X=()=>{const[D,v]=n.useState(!0),[o,d]=n.useState(!1),[m,c]=n.useState(null),[u,a]=n.useState(null),[A,h]=n.useState(!1),[y,j]=n.useState(!1),[r,p]=n.useState({content:"",content_ar:""});n.useEffect(()=>{C()},[]);const C=async()=>{v(!0),c(null);try{const s=await g.get("/admin/content/privacy-policy");if(s!=null&&s.data){const t=s.data;p({content:t.content||"",content_ar:t.content_ar||""}),j(t.content||t.content_ar)}}catch(s){c("Failed to load data"),console.error(s)}finally{v(!1)}},b=s=>{const{name:t,value:I}=s.target;p(z=>({...z,[t]:I}))},F=async s=>{s.preventDefault(),d(!0),c(null),a(null);try{const t=await g.put("/admin/content/privacy-policy",r);t!=null&&t.success?(a("Privacy policy saved successfully!"),j(!0),h(!1),setTimeout(()=>a(null),3e3)):c((t==null?void 0:t.message)||"Failed to save privacy policy")}catch(t){c("Failed to save privacy policy"),console.error(t)}finally{d(!1)}},T=async()=>{if(window.confirm("Are you sure you want to delete the privacy policy?")){d(!0),c(null);try{const s=await g.put("/admin/content/privacy-policy",{content:"",content_ar:""});s!=null&&s.success&&(p({content:"",content_ar:""}),j(!1),a("Privacy policy deleted successfully!"),setTimeout(()=>a(null),3e3))}catch(s){c("Failed to delete privacy policy"),console.error(s)}finally{d(!1)}}},k=()=>{h(!1),C()};return D?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx(P,{color:"primary"})}):A?e.jsxs(w,{children:[e.jsx(_,{children:e.jsx("strong",{children:y?"Edit Privacy Policy":"Add Privacy Policy"})}),e.jsxs(H,{children:[m&&e.jsx(i,{color:"danger",children:m}),u&&e.jsx(i,{color:"success",children:u}),e.jsxs(L,{onSubmit:F,children:[e.jsxs(S,{className:"mb-4",children:[e.jsx(x,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(N,{children:e.jsx("strong",{children:"English Content"})}),e.jsx(E,{name:"content",value:r.content,onChange:b})]})}),e.jsx(x,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(N,{children:e.jsx("strong",{children:"Arabic Content"})}),e.jsx("div",{dir:"rtl",children:e.jsx(E,{name:"content_ar",value:r.content_ar,onChange:b})})]})})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(l,{type:"submit",color:"primary",disabled:o,children:[o?e.jsx(P,{size:"sm",className:"me-2"}):null,"Save"]}),e.jsx(l,{type:"button",color:"secondary",onClick:k,disabled:o,children:"Cancel"})]})]})]})]}):e.jsxs(w,{children:[e.jsxs(_,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Privacy Policy"}),y?e.jsxs("div",{children:[e.jsxs(l,{color:"primary",size:"sm",className:"me-2",onClick:()=>h(!0),children:[e.jsx(f,{icon:R,className:"me-1"}),"Edit"]}),e.jsxs(l,{color:"danger",size:"sm",onClick:T,disabled:o,children:[e.jsx(f,{icon:B,className:"me-1"}),"Delete"]})]}):e.jsxs(l,{color:"primary",size:"sm",onClick:()=>h(!0),children:[e.jsx(f,{icon:M,className:"me-1"}),"Add Privacy Policy"]})]}),e.jsxs(H,{children:[m&&e.jsx(i,{color:"danger",children:m}),u&&e.jsx(i,{color:"success",children:u}),y?e.jsxs(S,{children:[e.jsxs(x,{md:6,children:[e.jsx("h6",{children:"English Content"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"200px",maxHeight:"400px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:r.content||"<p>-</p>"}})]}),e.jsxs(x,{md:6,children:[e.jsx("h6",{children:"Arabic Content"}),e.jsx("div",{className:"border p-3 rounded bg-light",style:{minHeight:"200px",maxHeight:"400px",overflowY:"auto"},dir:"rtl",dangerouslySetInnerHTML:{__html:r.content_ar||"<p>-</p>"}})]})]}):e.jsx(i,{color:"info",children:'No privacy policy configured yet. Click "Add Privacy Policy" to create one.'})]})]})};export{X as default};
